<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dumbbell Plot â€“ NZ Regional GDP</title>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script type="module" src="scripts/GDPCharting_withDumbbellPlot.js"></script> <!-- replace with your file path -->

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
    }
    .tooltip {
      position: absolute;
      padding: 6px 10px;
      background: rgba(0, 0, 0, 0.75);
      color: #fff;
      font-size: 12px;
      border-radius: 4px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    svg {
      background: #fff;
      border: 1px solid #ccc;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

  <h2>NZ Regional GDP: Dumbbell Plot</h2>
  <svg id="dumbbellPlot-NZ" width="1000" height="600"></svg>

  <h2>NZ North Island GDP: Dumbbell Plot</h2>
  <svg id="dumbbellPlot-NorthIsland" width="1000" height="600"></svg>

  <h2>NZ South Island GDP: Dumbbell Plot</h2>
  <svg id="dumbbellPlot-SouthIsland" width="1000" height="600"></svg>

  <div class="tooltip" id="tooltip"></div>

  <script type="module">
    import { GDPCharting } from './scripts/GDPCharting_withDumbbellPlot.js'; // adjust path if needed

    const regionMeta = await d3.csv("https://raw.githubusercontent.com/rm80/decoded/refs/heads/main/data/statsnz/New%20Zealand%20Regions.csv");
    const allRegions = regionMeta.map(d => d.Region);
    const northRegions = regionMeta.filter(d => d["Regions Group"] === "North Island").map(d => d.Region);
    const southRegions = regionMeta.filter(d => d["Regions Group"] === "South Island").map(d => d.Region);

    GDPCharting.renderDumbbellPlot({
      containerId: "dumbbellPlot-NZ",
      metric: "Gross Domestic Product",
      startYear: 2000,
      endYear: 2024,
      sort: "growth-desc",
      regionList: allRegions
    });

    GDPCharting.renderDumbbellPlot({
      containerId: "dumbbellPlot-NorthIsland",
      metric: "Gross Domestic Product",
      startYear: 2000,
      endYear: 2024,
      sort: "growth-desc",
      regionList: northRegions
    });

    GDPCharting.renderDumbbellPlot({
      containerId: "dumbbellPlot-SouthIsland",
      metric: "Gross Domestic Product",
      startYear: 2000,
      endYear: 2024,
      sort: "growth-desc",
      regionList: southRegions
    });
  </script>
</body>
</html>
